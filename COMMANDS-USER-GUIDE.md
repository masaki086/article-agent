# 記事作成システム カスタムコマンド利用ガイド

このガイドは、AI駆動型記事作成システムのカスタムコマンドを効果的に使用するための包括的なドキュメントです。

## 📚 コマンド概要

### 記事作成コマンド

| コマンド | 用途 | 前提条件 |
|---------|------|----------|
| `/define-series` | 新しいシリーズ定義の作成 | なし |
| `/create-article` | AI駆動型の記事作成 | シリーズが存在すること |
| `/create-human` | 人間の知見ベースの記事作成 | なし |
| `/update-series` | 既存シリーズの更新・最適化 | シリーズが存在すること |
| `/post-qiita` | Qiitaへの記事投稿 | 記事が作成済みであること |

### サポートコマンド

| コマンド | 用途 |
|---------|------|
| `/collect-human` | 人間の経験・知見を収集 |
| `/research-human` | 補足データの調査 |
| `/generate-human` | 収集データから記事生成 |
| `/generate-tags` | 記事タグの自動生成 |
| `/define-persona` | ペルソナの定義・更新 |

## 🚀 基本的な使い方

### 1. 新しいシリーズを作成する

```bash
# コンテキストサイズの確認（5000トークン以上なら/resetを推奨）
/check-context

# シリーズ定義の作成
/define-series

# 対話的なプロンプトに従って：
# - シリーズのトピック、目標、難易度を設定
# - ターゲット読者と解決したい問題を定義
# - 記事数と学習進行を計画（推奨：3-6記事）
# - ペルソナを選択（執筆者、レビュアー、読者）
```

**重要な注意点：**
- シリーズ名と記事名は英語のみ（日本語・ローマ字不可）
- 記事名は番号で開始（例：1-Introduction, 2-Advanced）
- シリーズ定義完了後、記事作成は別コマンドで実行

### 2. AI駆動型記事の作成

```bash
# コンテキストをクリーンにする（推奨）
/reset

# 記事作成（対話型）
/create-article --series YourSeriesName

# 特定記事の直接作成
/create-article --series YourSeriesName --article 1-Introduction --template tutorial

# カスタムフォーマット・ペルソナでの作成
/create-article --series YourSeriesName \
  --article 2-Advanced \
  --custom-format true \
  --custom-persona alexandra_sterling
```

**作成フロー：**
1. シリーズの検証
2. 記事の選択（未作成記事のリストから）
3. テンプレートの選択（技術記事、チュートリアル、ディスカッション）
4. ペルソナの設定（シリーズデフォルト or カスタム）
5. 生成方法の選択（対話型、自動、リソースベース）
6. 品質チェック（目標：95/100以上）

### 3. 人間の知見ベース記事の作成

```bash
# 完全な対話型ワークフロー
/create-human

# トピックを指定して開始
/create-human --topic "効果的なコードレビュー実践"

# 既存データを使用（スキップオプション）
/create-human --skip-collection  # 収集済みの知見を使用
/create-human --skip-research    # 調査済みのデータを使用
```

**ワークフロー：**
1. **知見収集**: 個人の経験、課題、学びを対話形式で収集
2. **調査研究**: 関連データ、統計、専門家の意見を自動検索
3. **記事生成**: 収集した情報を統合して記事を作成

### 4. 既存シリーズの更新

```bash
/update-series YourSeriesName

# 更新スコープの選択：
# 1. 構造のみ（ディレクトリ名変更、再編成）
# 2. コンテンツフォーマット（テンプレート、ペルソナ）
# 3. 完全な最新化（構造＋コンテンツ）
# 4. カスタム更新（特定の変更のみ）
```

**更新機能：**
- ディレクトリの番号付きフォーマットへの変更
- 最新テンプレートの適用
- ペルソナの一貫性確保
- 内部リンクの更新
- バックアップ作成（自動）

### 5. Qiitaへの投稿

```bash
# 対話型（シリーズ選択）
/post-qiita

# 特定シリーズを直接投稿
/post-qiita YourSeriesName

# 更新オプション
/post-qiita YourSeriesName --update  # 既存記事を更新
/post-qiita YourSeriesName --skip    # アップロード済みをスキップ（デフォルト）
```

**投稿プロセス：**
1. APIトークンの確認
2. **必須：ユーザー確認**（公開前の最終確認）
3. 画像の削除とテキスト最適化
4. バッチアップロード
5. シリーズナビゲーションリンクの自動追加

## 📁 ディレクトリ構造

```
article-agent/
├── articles/
│   ├── shared-templates/       # 共有テンプレート
│   │   ├── base/               # 基本フォーマット
│   │   ├── patterns/           # 記事パターン
│   │   └── series/             # シリーズ定義
│   │       └── {SeriesName}/
│   │           ├── personas-roles.md
│   │           ├── format.md
│   │           └── README.md
│   ├── series/                 # 各シリーズの記事
│   │   └── {SeriesName}/
│   │       └── {ArticleName}/
│   │           ├── drafts/
│   │           │   └── pages/
│   │           │       └── article.md
│   │           └── published/
│   ├── human-driven/           # 人間知見ベースの記事
│   │   └── {topic}/
│   │       └── article.md
│   └── resources/              # リソースファイル
│       └── {topic}/
│           ├── human-insights.json
│           └── research-data.json
└── .claude/
    ├── commands/               # コマンド定義
    └── config/                 # 設定ファイル
        └── qiita-token.json    # Qiita APIトークン
```

## 💡 ベストプラクティス

### コンテキスト管理
- 新しいシリーズ作成前に`/reset`を実行
- 各記事作成前に`/reset`でクリーンな状態から開始
- コンテキストが5000トークンを超えたら`/reset`を検討

### 品質管理
- 品質スコア95/100以上を目標
- テンプレートを活用してトークン使用量を25-35%削減
- ペルソナの一貫性を維持

### ワークフロー最適化

#### 新規シリーズの場合
```bash
1. /reset                          # コンテキストクリア
2. /define-series                  # シリーズ構造作成
3. /reset                          # 記事作成用にクリア
4. /create-article --series Name   # 最初の記事作成
5. 3-4を各記事で繰り返し
```

#### 既存シリーズの場合
```bash
1. /reset                          # クリーンスタート
2. /create-article --series Name   # 最小限のコンテキストロード
```

## ⚠️ 注意事項

### 必須要件
- **シリーズ作成**: 記事作成前に`/define-series`でシリーズを定義
- **英語命名**: シリーズ名・記事名は英語のみ
- **番号付け**: 記事名は番号で開始（1-, 2-, 3-...）
- **Qiita投稿**: APIトークンの設定が必要

### エラー対処

#### シリーズが見つからない場合
```
❌ ERROR: Series "Name" not found
💡 /define-series を実行してシリーズを作成してください
```

#### コンテキストオーバーロード
```
⚠️ WARNING: Context size exceeds 5000 tokens
💡 /reset を実行してから続行してください
```

#### Qiita APIトークンエラー
```
❌ ERROR: Qiita API token not configured
💡 /.claude/config/qiita-token.json にトークンを設定してください
```

## 🔧 トラブルシューティング

### Q: 記事作成時にエラーが発生する
A: 以下を確認してください：
1. シリーズが存在するか（`/define-series`実行済みか）
2. コンテキストサイズが適切か（`/reset`が必要か）
3. ファイルパスが正しいか

### Q: Qiita投稿が失敗する
A: 以下を確認してください：
1. APIトークンが正しく設定されているか
2. レート制限に達していないか
3. 記事フォーマットが正しいか

### Q: 品質スコアが低い
A: 以下を試してください：
1. `/reset`でコンテキストをクリア
2. 共有テンプレートを適切に使用
3. ペルソナ設定を確認

## 📊 効率化指標

- **トークン削減**: 25-35%（共有テンプレート活用）
- **作業時間削減**: 50-60%（自動化による）
- **品質スコア**: 95/100以上
- **一貫性維持**: 90%以上（ペルソナ活用）

## 🆘 サポート

問題が解決しない場合は、以下の情報と共に報告してください：
- 実行したコマンド
- エラーメッセージ
- コンテキストサイズ
- 関連ファイルパス

---

最終更新: 2025-08-07 | Version: 1.0