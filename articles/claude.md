**日付:** 2025-08-02 | **バージョン:** 2.0

# CLAUDE.md（最適化記事作成ガイドライン）

---

## ✅ プロジェクト概要

- 生成 AI が記事のすべてを作成する実験的な投稿環境
- 記事の公開先には Qiita を利用
- 画像は Mermaid または画像生成 AI で作成
- **トークン効率化**: 25-35%削減を実現する最適化システム

---

## 🚀 最適化記事作成ワークフロー（2025年版）

### Phase 1: シリーズ定義（1回のみ）
**対話的SubAgent**: `/series-define` を使用

1. **共有テンプレート参照**
   - `/articles/shared-templates/series-common.md`: 共通キャラクター設定
   - `/articles/shared-templates/english-templates.md`: 英語版テンプレート統合
   - `/articles/shared-templates/optimized-format.md`: トークン効率化フォーマット

2. **シリーズ固有設定作成**
   - `author.md`: 執筆者ペルソナ（personas/参照形式）
   - `reviewer.md`: レビュー体制設定
   - `format.md`: シリーズ固有の文体調整

### Phase 2: 記事作成フェーズ（最適化版）

#### A. 記事構成設計
1. **optimized-format.md** をベースに記事構造作成
2. **series-common.md** から共通要素参照
3. 目次案の提示（シリーズ進捗を反映）
4. 各セクションごとに内容案提示、人間が選択

#### B. 記事執筆（最適化版）
1. 記事固有の技術内容のみに集中
2. 共通パターンは参照形式で効率化
3. **english-templates.md** から該当テンプレート選択
4. セクション完成時は `sectionName_fixed.md` に保存

#### C. レビューフェーズ（ペルソナベース）
1. **reviewer.md** で設定されたペルソナによる自動レビュー
2. 校正者・レビュワー・読者ペルソナが段階的評価
3. レビュー結果を `reviews/` フォルダに格納
4. 修正提案を文章単位で提示、人間承認後に確定
5. シリーズ全体の一貫性チェック

#### D. 画像生成フェーズ
- **Mermaid**: `.mmd` ファイル出力 + PNG 変換
- **AI画像生成**: 文章から抽出したプロンプト + 自動タグ補強
- **Alt テキスト**: アクセシビリティ対応で自動生成
- 画像は `images/` または `diagrams/` に分類保存

#### E. 記事公開フェーズ
- **最終品質チェック**: Claude Code Agent による統合評価
- **Reader Review セクション**: 全ペルソナの評価を記事末尾に記録
- **ファイル移動**: `drafts/` → `published/` ディレクトリ
- **Qiita API投稿**: 記事と画像の自動投稿
- **アーカイブ**: 投稿済み記事は日付付きで保存（例：`article_20250802.md`）

### トークン効率化の特徴
- **重複排除**: 共通要素の参照化により25-35%削減
- **モジュラー設計**: 必要な要素のみ読み込み
- **段階的作成**: 記事固有内容のみに集中
- **シリーズ連携**: 前後記事との関係性を効率管理

## 📊 投稿品質の数値化とレビュー

品質向上と一貫性のため、AI による評価・レビュー体制を整備します。

- Agent 定義ファイル（`.claude/agents/`）にて以下を定義：
  - 校正者（Proofreader）
  - レビュワー（Reviewer）
  - 複数読者（初心者エンジニア、中堅技術者、非技術職など）

## ✅ 記事品質チェックリスト

記事公開前に以下を確認：

### 技術記事特有の確認項目

- [ ] タイトルが検索しやすく具体的か
- [ ] 導入部で記事の価値が明確に伝わるか
- [ ] コード例にコメントが適切に入っているか
- [ ] エラー処理やエッジケースに言及しているか
- [ ] 実行環境やバージョン情報が明記されているか
- [ ] 参考リンクや関連記事へのリンクが適切か

### AI 生成記事の確認項目

- [ ] AI 生成であることが明記されているか
- [ ] 生成時の前提条件や制限事項が記載されているか
- [ ] 人間のレビューを経た箇所が明確か

### Markdownコードブロックの記法ルール

- [ ] コードブロック内でコードブロックをネストしていないか（記事作成時）
- [ ] ネストが必要な場合は以下の代替表現を使用しているか：
  - インデント（4スペース）での表現 + 言語名を明記（例：**TypeScript:**）
  - バッククォートを別文字（例：`'''`）に置換
  - コードブロック記法の説明時は文章での説明
- [ ] インデント形式の場合、必ず言語名を明記しているか（TypeScript、JavaScript、Python、Java、Go、Rust、JSON、YAML、Bash、Text等）
- [ ] ファイル構造やディレクトリ構造を示す場合もBash等の適切な言語を指定しているか

### ペルソナ参照システムの確認項目

- [ ] author.md でペルソナが適切に参照されているか
- [ ] format.md で記事固有の調整が明記されているか
- [ ] reviewer.md でレビュワーペルソナが設定されているか
- [ ] ペルソナファイルが存在し、アクセス可能か

### ディレクトリ構造の確認項目

- [ ] drafts/pages/ に記事ファイルが配置されているか
- [ ] 必要に応じて images/ diagrams/ ディレクトリが作成されているか
- [ ] 公開時に published/ ディレクトリに移動する準備ができているか

### 出力セクション例

## Reader Review

**校正者:** 明快で誤字なし、文法も正確です。
**レビュワー:** 構成が理路整然としており、学習の流れに無理がありません。
**読者（中堅エンジニア）:** 実務視点の補足があるとさらに良いです。

```

---

これらのルールに従い、すべての記事生成・評価プロセスを自動化・標準化していきます。
```
