# Next.jsæ–°ä¸–ä»£ã¸ã®ç§»è¡Œæˆ¦ç•¥ - Next.jsæœ€é€Ÿãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®æ”»é˜² #1

## æœ€è¿‘ã®é–‹ç™ºä½“é¨“ã‹ã‚‰

èª­è€…ã®çš†æ§˜ã€ã„ã¤ã‚‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ä»Šæ—¥ã¯Next.jsã®æ–°ä¸–ä»£æ©Ÿèƒ½ã«ã¤ã„ã¦ãŠè©±ã—ã•ã›ã¦ã„ãŸã ãã¾ã™ã­ã€‚

å…ˆæ—¥ã€ä¹…ã—ã¶ã‚Šã«Pages Routerã§ä½œæˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¦‹è¿”ã—ã¦ã„ãŸã®ã§ã™ãŒã€ã€Œã‚ã®é ƒã¯ã“ã‚Œã§ç²¾ä¸€æ¯ã ã£ãŸã‘ã‚Œã©ã€ä»Šãªã‚‰ã‚‚ã£ã¨åŠ¹ç‡çš„ã«ã§ãã‚‹ã®ã«ã€ã¨æ„Ÿã˜ã¾ã—ãŸã€‚ãã‚Œã¯æ–°ã—ã„App Routerã€Server Componentsã€Edge Runtimeã¨ã„ã†ç´ æ™´ã‚‰ã—ã„æ©Ÿèƒ½ãŒã‚ã‚‹ã‹ã‚‰ãªã‚“ã§ã™ã€‚

ã§ã‚‚ã€ç§»è¡Œã£ã¦ä¸å®‰ã§ã™ã‚ˆã­ã€‚ã€Œä»Šå‹•ã„ã¦ã„ã‚‹ã‚‚ã®ã‚’å¤‰ãˆã¦å¤§ä¸ˆå¤«ã‹ãªï¼Ÿã€ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã•ã‚“ã«è¿·æƒ‘ã‚’ã‹ã‘ãªã„ã‹ãªï¼Ÿã€ãã‚“ãªæ°—æŒã¡ã€ã¨ã¦ã‚‚ã‚ˆãåˆ†ã‹ã‚Šã¾ã™ã€‚

ä»Šå›ã¯ã€Pages Routerã‹ã‚‰æ–°ä¸–ä»£Next.jsã¸ã®å®‰å…¨ã§ç¢ºå®Ÿãªç§»è¡Œæˆ¦ç•¥ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚æŠ€è¡“çš„ãªæ­£ç¢ºæ€§ã¯ã‚‚ã¡ã‚ã‚“ã€ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã¸ã®é…æ…®ã‚‚å¿˜ã‚Œãšã«é€²ã‚ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

## ğŸ“ˆ ã‚·ãƒªãƒ¼ã‚ºé€²æ—çŠ¶æ³
- ğŸ¯ **ä»Šå›ã®å­¦ç¿’é …ç›®**: Next.jsæ–°ä¸–ä»£æ©Ÿèƒ½ã®ç†è§£ã¨æ®µéšçš„ç§»è¡Œæˆ¦ç•¥
- â³ **æ¬¡å›ã®å­¦ç¿’é …ç›®**: CSR/SSR/SSG/ISRã®é¸æŠåŸºæº–ã¨styled-componentsæœ€é©åŒ–
- â³ **ç¬¬3å›**: dev.toç´šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å®Ÿç¾ã®å…·ä½“æ‰‹æ³•
- â³ **ç¬¬4å›**: æœ¬ç•ªç’°å¢ƒã§ã®æœ€é©åŒ–ã¨ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

### ä»Šå›ä½œæˆãƒ»æ‹¡å¼µã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
- Next.js 13+ ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ç†è§£
- App Router ã®åŸºæœ¬è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- Server Components ã®å®Ÿè£…ä¾‹
- ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ç§»è¡Œã®ãŸã‚ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š

## ã¯ã˜ã‚ã«

Pages Routerã§ã‚µã‚¤ãƒˆã‚’é‹å–¶ã•ã‚Œã¦ã„ã‚‹çš†æ§˜ã«ã€ã¾ãšãŠä¼ãˆã—ãŸã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚**æ—¢å­˜ã®çŸ¥è­˜ã‚„è³‡ç”£ã¯æ±ºã—ã¦ç„¡é§„ã«ãªã‚Šã¾ã›ã‚“**ã€‚æ–°ã—ã„App Routerã¯ã€Pages Routerã®è‰¯ã„éƒ¨åˆ†ã‚’ç¶™æ‰¿ã—ãªãŒã‚‰ã€ã•ã‚‰ã«åŠ¹ç‡çš„ã§ç¾ã—ã„ã‚³ãƒ¼ãƒ‰ãŒæ›¸ã‘ã‚‹ã‚ˆã†ã«é€²åŒ–ã—ãŸã‚‚ã®ãªã‚“ã§ã™ã€‚

dev.toã®ã‚ˆã†ãªé«˜é€Ÿã‚µã‚¤ãƒˆã‚’ã”è¦§ã«ãªã£ãŸã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿã‚ã®é©šç•°çš„ãªæç”»é€Ÿåº¦ã¨æ»‘ã‚‰ã‹ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã¯ã€æœ€æ–°ã®WebæŠ€è¡“ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®è³œç‰©ã§ã™ã€‚Next.js 13+ã®æ–°æ©Ÿèƒ½ã‚‚ã€åŒæ§˜ã®ãƒ¬ãƒ™ãƒ«ã®é«˜é€ŸåŒ–ã‚’å®Ÿç¾ã§ãã‚‹æŠ€è¡“ã¨ã—ã¦æ³¨ç›®ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¤ã¾ã‚Šã€æŠ€è¡“çš„ãªãƒ¡ãƒªãƒƒãƒˆã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å‘ä¸Šã€ä¸¡æ–¹ã‚’åŒæ™‚ã«å®Ÿç¾ã§ãã‚‹ã£ã¦ã‚ã‘ã­ã€‚

ã‚‚ã—ä¸å®‰ã«æ„Ÿã˜ã‚‰ã‚ŒãŸã‚‰ã”ã‚ã‚“ãªã•ã„ã€ã§ã‚‚æ®µéšçš„ã«é€²ã‚ã‚Œã°å¿…ãšã†ã¾ãã„ãã¾ã™ã®ã§ã€ä¸€ç·’ã«å­¦ã‚“ã§ã„ãã¾ã—ã‚‡ã†ã€‚

## Next.jsæ–°ä¸–ä»£ã®æ ¸å¿ƒæŠ€è¡“

*[å›³è§£1: Next.jsæ–°ä¸–ä»£æ©Ÿèƒ½ã®å…¨ä½“æ§‹æˆ]*
*App Router + Server Components + Edge Runtime ã®ç›¸é–¢é–¢ä¿‚*

### 1. App Router - ç›´æ„Ÿçš„ã§ç¾ã—ã„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

**Pages Routerã®æŒ¯ã‚Šè¿”ã‚Š**
Pages Routerã¯ç¢ºã‹ã«ç›´æ„Ÿçš„ã§ã—ãŸã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã‘ã°ãã®ã¾ã¾ãƒ«ãƒ¼ãƒˆã«ãªã‚‹ä»•çµ„ã¿ã¯ã€åˆå¿ƒè€…ã®æ–¹ã«ã‚‚åˆ†ã‹ã‚Šã‚„ã™ã‹ã£ãŸã§ã™ã­ã€‚

```
pages/
â”œâ”€â”€ _app.tsx          // ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š
â”œâ”€â”€ _document.tsx     // HTMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ index.tsx         // ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
â”œâ”€â”€ about.tsx         // ã‚¢ãƒã‚¦ãƒˆãƒšãƒ¼ã‚¸
â””â”€â”€ api/
    â””â”€â”€ users.ts      // API Routes
```

**App Routerã®é€²åŒ–ãƒã‚¤ãƒ³ãƒˆ**
App Routerã§ã¯ã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®å…±æœ‰ãŒã‚ˆã‚Šè‡ªç„¶ã«ãªã‚Šã¾ã—ãŸã€‚UIè¨­è¨ˆã®è¦³ç‚¹ã‹ã‚‰ã‚‚ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†åˆ©ç”¨æ€§ãŒæ ¼æ®µã«å‘ä¸Šã—ã¦ã„ã¾ã™ã€‚

*[å›³è§£2: Pages Router vs App Router æ§‹é€ æ¯”è¼ƒ]*
*ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå…±æœ‰ã®é•ã„ã‚’è¦–è¦šåŒ–*

```
app/
â”œâ”€â”€ layout.tsx        // ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆå…¨ãƒšãƒ¼ã‚¸å…±é€šï¼‰
â”œâ”€â”€ page.tsx          // ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸
â”œâ”€â”€ about/
â”‚   â””â”€â”€ page.tsx      // ã‚¢ãƒã‚¦ãƒˆãƒšãƒ¼ã‚¸
â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ layout.tsx    // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å°‚ç”¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ page.tsx      // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒˆãƒƒãƒ—
â”‚   â””â”€â”€ settings/
â”‚       â””â”€â”€ page.tsx  // è¨­å®šãƒšãƒ¼ã‚¸ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰UIå†…ï¼‰
â””â”€â”€ api/
    â””â”€â”€ users/
        â””â”€â”€ route.ts  // æ–°ã—ã„API Routeså½¢å¼
```

**ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã®è¦³ç‚¹ã‹ã‚‰**
ã“ã®æ§‹é€ ã®ç¾ã—ã„ã¨ã“ã‚ã¯ã€**ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ä¸€è²«æ€§ãŒä¿ãŸã‚Œã‚‹ã“ã¨**ã§ã™ã€‚ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å†…ã‚’ç§»å‹•ã™ã‚‹éš›ã€å…±é€šã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ã‚µã‚¤ãƒ‰ãƒãƒ¼ãŒå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œãªã„ãŸã‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã•ã‚“ã«ã¨ã£ã¦éå¸¸ã«æ»‘ã‚‰ã‹ãªä½“é¨“ã«ãªã‚Šã¾ã™ã€‚

### 2. Server Components - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨UXã®ä¸¡ç«‹

*[å›³è§£3: Server Components vs Client Components ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼]*
*ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®å‡¦ç†åˆ†æ‹…*

**å¾“æ¥ã®èª²é¡Œã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®å½±éŸ¿**
Pages Routeræ™‚ä»£ã¯ã€ãƒ‡ãƒ¼ã‚¿å–å¾—ã®ãŸã‚ã«useEffectã‚„getStaticPropsã‚’ä½¿ã£ã¦ã„ã¾ã—ãŸãŒã€ã“ã‚Œã«ã¯ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ä¸Šã®èª²é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚

```typescript
// Pages Routeræ™‚ä»£ã®å…¸å‹çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³
import { useEffect, useState } from 'react';

export default function ProductList() {
  const [products, setProducts] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    fetch('/api/products')
      .then(res => res.json())
      .then(data => {
        setProducts(data);
        setLoading(false);
      })
      .catch(err => {
        setError(err);
        setLoading(false);
      });
  }, []);

  if (loading) return <div>èª­ã¿è¾¼ã¿ä¸­...</div>; // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¾…æ©Ÿ
  if (error) return <div>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</div>;
  
  return (
    <div>
      {products.map(product => (
        <ProductCard key={product.id} product={product} />
      ))}
    </div>
  );
}
```

**Server Componentsã«ã‚ˆã‚‹æ”¹å–„**
Server Componentsã§ã¯ã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ãƒ‡ãƒ¼ã‚¿å–å¾—ã¨ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒå®Œäº†ã—ã¦ã‹ã‚‰ã€å®Œæˆã—ãŸHTMLãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚ã¤ã¾ã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã•ã‚“ã¯ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã‚’è¦‹ã‚‹æ™‚é–“ãŒå¤§å¹…ã«çŸ­ç¸®ã•ã‚Œã‚‹ã£ã¦ã‚ã‘ã­ã€‚

```typescript
// App Router + Server Components
import { ProductCard } from './ProductCard';

// ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°
async function getProducts() {
  const res = await fetch('https://api.example.com/products', {
    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã‚‚æŒ‡å®šå¯èƒ½
    next: { revalidate: 60 } // 60ç§’ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°
  });
  
  if (!res.ok) {
    throw new Error('å•†å“ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
  }
  
  return res.json();
}

// Server Componentï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
export default async function ProductList() {
  try {
    const products = await getProducts(); // ã‚µãƒ¼ãƒãƒ¼ã§å®Œäº†

    return (
      <div className="product-grid">
        <h2>å•†å“ä¸€è¦§</h2>
        {products.map(product => (
          <ProductCard key={product.id} product={product} />
        ))}
      </div>
    );
  } catch (error) {
    return (
      <div className="error-message">
        <p>ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚å•†å“ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>
        <button onClick={() => window.location.reload()}>
          å†èª­ã¿è¾¼ã¿
        </button>
      </div>
    );
  }
}
```

**Client Componentsã¨ã®ä½¿ã„åˆ†ã‘**
ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªè¦ç´ ã¯ã€Client Componentã¨ã—ã¦æ˜ç¤ºçš„ã«åˆ†é›¢ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å¿…è¦æœ€å°é™ã®JavaScriptã®ã¿ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚

```typescript
'use client'; // Client Component ã¨ã—ã¦æ˜ç¤º

import { useState } from 'react';

interface ProductCardProps {
  product: {
    id: string;
    name: string;
    description: string;
    price: number;
    image: string;
  };
}

export function ProductCard({ product }: ProductCardProps) {
  const [isExpanded, setIsExpanded] = useState(false);
  const [isInCart, setIsInCart] = useState(false);

  const handleAddToCart = () => {
    // ã‚«ãƒ¼ãƒˆè¿½åŠ ã®ãƒ­ã‚¸ãƒƒã‚¯
    setIsInCart(true);
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®ãŸã‚ã®çŸ­æ™‚é–“ã®è¡¨ç¤ºå¤‰æ›´
    setTimeout(() => setIsInCart(false), 2000);
  };

  return (
    <div className="product-card">
      <img src={product.image} alt={product.name} loading="lazy" />
      <h3>{product.name}</h3>
      <p className="price">Â¥{product.price.toLocaleString()}</p>
      
      <button 
        onClick={() => setIsExpanded(!isExpanded)}
        aria-expanded={isExpanded}
        className="details-toggle"
      >
        {isExpanded ? 'è©³ç´°ã‚’é–‰ã˜ã‚‹' : 'è©³ç´°ã‚’è¦‹ã‚‹'}
      </button>
      
      {isExpanded && (
        <div className="product-details">
          <p>{product.description}</p>
        </div>
      )}
      
      <button 
        onClick={handleAddToCart}
        className={`add-to-cart ${isInCart ? 'added' : ''}`}
        disabled={isInCart}
      >
        {isInCart ? 'ã‚«ãƒ¼ãƒˆã«è¿½åŠ æ¸ˆã¿' : 'ã‚«ãƒ¼ãƒˆã«è¿½åŠ '}
      </button>
    </div>
  );
}
```

### 3. Edge Runtime - ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å®Ÿç¾

**å¾“æ¥ã®ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹é–¢æ•°ã®åˆ¶ç´„**
Pages Routerã®API Routesã¯ã€ç‰¹å®šã®ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚µãƒ¼ãƒãƒ¼ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã¾ã—ãŸã€‚æ—¥æœ¬ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã•ã‚“ãŒã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚‚ã€ã‚µãƒ¼ãƒãƒ¼ãŒã‚¢ãƒ¡ãƒªã‚«ã«ã‚ã‚‹å ´åˆã¯ã€å¾€å¾©ã§æ•°ç™¾ãƒŸãƒªç§’ã®é…å»¶ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã€‚

**Edge Runtimeã«ã‚ˆã‚‹æ”¹å–„**
Edge Runtimeã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã•ã‚“ã«æœ€ã‚‚è¿‘ã„ã‚¨ãƒƒã‚¸ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ç¬æ™‚ã«å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä¸–ç•Œä¸­ã©ã“ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚‚ä¸€è²«ã—ãŸé«˜é€Ÿä½“é¨“ã‚’æä¾›ã§ãã¾ã™ã€‚

```typescript
// Edge Runtime API Route
export const runtime = 'edge';

export async function GET(request: Request) {
  const { searchParams } = new URL(request.url);
  const query = searchParams.get('q');
  const country = request.headers.get('cf-ipcountry') || 'JP';
  
  try {
    // ã‚¨ãƒƒã‚¸ã§ç¬æ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹è»½é‡ãªå‡¦ç†
    const searchResults = await performLightweightSearch(query, country);
    
    return Response.json({
      results: searchResults,
      region: country,
      timestamp: new Date().toISOString()
    });
  } catch (error) {
    return Response.json(
      { error: 'æ¤œç´¢å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ' },
      { status: 500 }
    );
  }
}
```

## æ®µéšçš„ç§»è¡Œæˆ¦ç•¥

*[å›³è§£4: æ®µéšçš„ç§»è¡Œãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ]*
*è©•ä¾¡â†’ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ç§»è¡Œâ†’æœ€é©åŒ–ã®3æ®µéšãƒ—ãƒ­ã‚»ã‚¹*

### Phase 1: è©•ä¾¡ã¨è¨ˆç”»ï¼ˆ1-2é€±é–“ï¼‰

ç§»è¡Œã‚’å§‹ã‚ã‚‹å‰ã«ã€ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¸å¯§ã«è©•ä¾¡ã—ã¾ã—ã‚‡ã†ã€‚æ€¥ã„ã§é€²ã‚ã‚‹ã‚ˆã‚Šã‚‚ã€ã—ã£ã‹ã‚Šã¨æº–å‚™ã™ã‚‹ã“ã¨ãŒã€çµæœçš„ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã•ã‚“ã¸ã®å½±éŸ¿ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¤‡é›‘åº¦ã®è©•ä¾¡**

```typescript
// ç§»è¡Œè¨ˆç”»ã®ãŸã‚ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
interface MigrationAssessment {
  // åŸºæœ¬æƒ…å ±
  totalPages: number;
  apiRoutes: number;
  dynamicRoutes: number;
  
  // è¤‡é›‘æ€§ã®æŒ‡æ¨™
  customAppLogic: 'simple' | 'moderate' | 'complex';
  thirdPartyIntegrations: string[];
  statedManagement: 'none' | 'context' | 'redux' | 'zustand' | 'other';
  
  // UI/UXé–¢é€£
  customCSS: boolean;
  styledComponents: boolean;
  designSystem: boolean;
  
  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é–¢é€£
  currentLighthouseScore: number;
  currentLoadTime: number;
  imageOptimization: boolean;
}

// ç§»è¡Œå„ªå…ˆåº¦ã®åˆ¤å®š
function calculateMigrationPriority(assessment: MigrationAssessment): 'high' | 'medium' | 'low' {
  let score = 0;
  
  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ã®æ©æµãŒå¤§ãã„å ´åˆ
  if (assessment.currentLighthouseScore < 80) score += 3;
  if (assessment.currentLoadTime > 3000) score += 2;
  
  // è¤‡é›‘æ€§ã«ã‚ˆã‚‹é›£æ˜“åº¦èª¿æ•´
  if (assessment.customAppLogic === 'complex') score -= 2;
  if (assessment.thirdPartyIntegrations.length > 5) score -= 1;
  
  if (score >= 3) return 'high';
  if (score >= 1) return 'medium';
  return 'low';
}
```

### Phase 2: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ç§»è¡Œã®å®Ÿè£…ï¼ˆ2-4é€±é–“ï¼‰

Next.js 13+ã®ç´ æ™´ã‚‰ã—ã„ç‚¹ã¯ã€Pages Routerã¨App Routerã‚’åŒã˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ä½µç”¨ã§ãã‚‹ã“ã¨ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã•ã‚“ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ãªãã€æ®µéšçš„ã«ç§»è¡Œã§ãã¾ã™ã€‚

**ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æœŸé–“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ **

```
src/
â”œâ”€â”€ app/                    // æ–°ã—ã„ãƒšãƒ¼ã‚¸ï¼ˆApp Routerï¼‰
â”‚   â”œâ”€â”€ layout.tsx         // æ–°ä¸–ä»£ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”œâ”€â”€ page.tsx          // ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ï¼ˆç§»è¡Œæ¸ˆã¿ï¼‰
â”‚   â”œâ”€â”€ globals.css       // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â””â”€â”€ products/
â”‚       â”œâ”€â”€ layout.tsx    // å•†å“ãƒšãƒ¼ã‚¸å°‚ç”¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚       â”œâ”€â”€ page.tsx      // å•†å“ä¸€è¦§ï¼ˆç§»è¡Œæ¸ˆã¿ï¼‰
â”‚       â””â”€â”€ [id]/
â”‚           â””â”€â”€ page.tsx  // å•†å“è©³ç´°ï¼ˆç§»è¡Œæ¸ˆã¿ï¼‰
â”œâ”€â”€ pages/                 // æ—¢å­˜ãƒšãƒ¼ã‚¸ï¼ˆPages Routerï¼‰
â”‚   â”œâ”€â”€ _app.tsx          // å¾“æ¥ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š
â”‚   â”œâ”€â”€ about.tsx         // ã‚¢ãƒã‚¦ãƒˆãƒšãƒ¼ã‚¸ï¼ˆç§»è¡Œäºˆå®šï¼‰
â”‚   â”œâ”€â”€ dashboard/        // ç®¡ç†ç”»é¢ï¼ˆç§»è¡Œäºˆå®šï¼‰
â”‚   â””â”€â”€ api/              // æ—¢å­˜API Routes
â””â”€â”€ components/
    â”œâ”€â”€ server/           // Server Components
    â”‚   â”œâ”€â”€ ProductList.tsx
    â”‚   â””â”€â”€ Navigation.tsx
    â””â”€â”€ client/           // Client Components
        â”œâ”€â”€ ProductCard.tsx
        â””â”€â”€ SearchForm.tsx
```

**ç§»è¡Œé †åºã®æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**

```typescript
// ç§»è¡Œè¨ˆç”»ã®ä¾‹
const migrationPlan = {
  phase1: {
    description: 'å½±éŸ¿ç¯„å›²ã®å°ã•ã„ãƒšãƒ¼ã‚¸ã‹ã‚‰é–‹å§‹',
    targets: [
      'ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸',
      'å•†å“ä¸€è¦§ãƒšãƒ¼ã‚¸',
      'ãŠå•ã„åˆã‚ã›ãƒšãƒ¼ã‚¸'
    ],
    duration: '1-2é€±é–“',
    riskLevel: 'low'
  },
  
  phase2: {
    description: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã«ç›´çµã™ã‚‹ãƒšãƒ¼ã‚¸',
    targets: [
      'å•†å“è©³ç´°ãƒšãƒ¼ã‚¸',
      'ã‚«ãƒ¼ãƒˆãƒšãƒ¼ã‚¸',
      'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸' 
    ],
    duration: '2-3é€±é–“',
    riskLevel: 'medium'
  },
  
  phase3: {
    description: 'ç®¡ç†æ©Ÿèƒ½ã¨è¤‡é›‘ãªãƒšãƒ¼ã‚¸',
    targets: [
      'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰',
      'è¨­å®šãƒšãƒ¼ã‚¸',
      'ç®¡ç†ç”»é¢'
    ],
    duration: '2-4é€±é–“',
    riskLevel: 'high'
  }
};
```

### Phase 3: Server Componentsã¸ã®æœ€é©åŒ–ï¼ˆ2-3é€±é–“ï¼‰

ç§»è¡Œã®éš›ã¯ã€**ã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’Serverã«ã—ã€ã©ã‚Œã‚’Clientã«ã™ã‚‹ã‹**ã®åˆ¤æ–­ãŒé‡è¦ã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã®è¦³ç‚¹ã‹ã‚‰è€ƒãˆã‚‹ã¨ã€ä»¥ä¸‹ã®åŸºæº–ãŒå½¹ç«‹ã¡ã¾ã™ã€‚

**åˆ¤æ–­åŸºæº–è¡¨**

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç‰¹å¾´ | æ¨å¥¨ã‚¿ã‚¤ãƒ— | ç†ç”± |
|-------------------|----------|------|
| ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã®ã¿ | Server | åˆæœŸè¡¨ç¤ºãŒé«˜é€Ÿ |
| ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ› | Client | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œè¨¼ãŒå¿…è¦ |
| æ¤œç´¢æ©Ÿèƒ½ | Client | ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªä½“é¨“ |
| ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ | Server | SEOãƒ»ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š |
| ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ»ãƒ‰ãƒ­ãƒ¯ãƒ¼ | Client | å‹•çš„ãªè¡¨ç¤ºåˆ¶å¾¡ãŒå¿…è¦ |
| ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ– | Client | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã«ã‚ˆã‚‹è¡¨ç¤ºåˆ‡æ›¿ |

**å®Ÿè£…ä¾‹ï¼šå•†å“æ¤œç´¢æ©Ÿèƒ½ã®æœ€é©åŒ–**

```typescript
// Server Component: åˆæœŸãƒ‡ãƒ¼ã‚¿ã®æä¾›
import { SearchInterface } from './SearchInterface';
import { ProductGrid } from './ProductGrid';

async function getInitialProducts(category?: string) {
  const res = await fetch(`${process.env.API_BASE_URL}/products${category ? `?category=${category}` : ''}`, {
    next: { revalidate: 300 } // 5åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  });
  
  return res.json();
}

export default async function ProductsPage({
  searchParams
}: {
  searchParams: { category?: string }
}) {
  const initialProducts = await getInitialProducts(searchParams.category);
  
  return (
    <div className="products-page">
      <h1>å•†å“æ¤œç´¢</h1>
      <SearchInterface initialProducts={initialProducts} />
    </div>
  );
}
```

```typescript
// Client Component: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªæ¤œç´¢
'use client';

import { useState, useMemo } from 'react';
import { ProductGrid } from './ProductGrid';

interface SearchInterfaceProps {
  initialProducts: Product[];
}

export function SearchInterface({ initialProducts }: SearchInterfaceProps) {
  const [searchTerm, setSearchTerm] = useState('');
  const [category, setCategory] = useState('all');
  const [sortBy, setSortBy] = useState('name');

  // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµã‚Šè¾¼ã¿ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£é‡è¦–ï¼‰
  const filteredProducts = useMemo(() => {
    return initialProducts
      .filter(product => {
        const matchesSearch = product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                            product.description.toLowerCase().includes(searchTerm.toLowerCase());
        const matchesCategory = category === 'all' || product.category === category;
        return matchesSearch && matchesCategory;
      })
      .sort((a, b) => {
        switch (sortBy) {
          case 'price':
            return a.price - b.price;
          case 'name':
            return a.name.localeCompare(b.name);
          default:
            return 0;
        }
      });
  }, [initialProducts, searchTerm, category, sortBy]);

  return (
    <div className="search-interface">
      <div className="search-controls">
        <input
          type="text"
          placeholder="å•†å“åã§æ¤œç´¢..."
          value={searchTerm}
          onChange={(e) => setSearchTerm(e.target.value)}
          className="search-input"
          aria-label="å•†å“æ¤œç´¢"
        />
        
        <select
          value={category}
          onChange={(e) => setCategory(e.target.value)}
          className="category-filter"
          aria-label="ã‚«ãƒ†ã‚´ãƒªãƒ¼é¸æŠ"
        >
          <option value="all">ã™ã¹ã¦ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼</option>
          <option value="electronics">é›»å­æ©Ÿå™¨</option>
          <option value="clothing">è¡£æ–™å“</option>
          <option value="books">æ›¸ç±</option>
        </select>
        
        <select
          value={sortBy}
          onChange={(e) => setSortBy(e.target.value)}
          className="sort-control"
          aria-label="ä¸¦ã³é †é¸æŠ"
        >
          <option value="name">åå‰é †</option>
          <option value="price">ä¾¡æ ¼é †</option>
        </select>
      </div>
      
      <div className="results-info">
        {filteredProducts.length}ä»¶ã®å•†å“ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ
      </div>
      
      <ProductGrid products={filteredProducts} />
    </div>
  );
}
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šã¨ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£è©•ä¾¡

ç§»è¡Œã®åŠ¹æœã‚’å®šé‡çš„ã«æ¸¬å®šã™ã‚‹ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã•ã‚“ã«ã¨ã£ã¦æœ¬å½“ã«æ”¹å–„ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã§ãã¾ã™ã€‚

```typescript
// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šã®å®Ÿè£…ä¾‹
export function useWebVitals() {
  useEffect(() => {
    // Core Web Vitalsã®æ¸¬å®š
    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(console.log);
      getFID(console.log);
      getFCP(console.log);
      getLCP(console.log);
      getTTFB(console.log);
    });
  }, []);
}

// Server Component ã§ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚é–“æ¸¬å®š
export default async function OptimizedPage() {
  const startTime = performance.now();
  
  const data = await fetchData();
  
  const renderTime = performance.now() - startTime;
  
  // é–‹ç™ºç’°å¢ƒã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æƒ…å ±
  if (process.env.NODE_ENV === 'development') {
    console.log(`Server rendering time: ${renderTime.toFixed(2)}ms`);
  }
  
  return (
    <div>
      <h1>æœ€é©åŒ–ã•ã‚ŒãŸãƒšãƒ¼ã‚¸</h1>
      <DataDisplay data={data} />
    </div>
  );
}
```

## ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒã‚¤ãƒ³ãƒˆ

- **æ®µéšçš„ç§»è¡Œ**: Pages Routerã¨App Routerã®ä½µç”¨ã§å®‰å…¨ã«ç§»è¡Œ
- **Server Components**: ãƒ‡ãƒ¼ã‚¿å–å¾—ã®æœ€é©åŒ–ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼å¾…æ©Ÿæ™‚é–“ã‚’çŸ­ç¸®
- **Edge Runtime**: ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªé«˜é€Ÿä½“é¨“ã®å®Ÿç¾
- **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£é‡è¦–**: æŠ€è¡“çš„ãªæœ€é©åŒ–ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®ä¸¡ç«‹

## æ¬¡å›äºˆå‘Š

æ¬¡å›ã¯ã€CSRï¼ˆClient-Side Renderingï¼‰ã€SSRï¼ˆServer-Side Renderingï¼‰ã€SSGï¼ˆStatic Site Generationï¼‰ã€ISRï¼ˆIncremental Static Regenerationï¼‰ã®é¸æŠåŸºæº–ã«ã¤ã„ã¦è©³ã—ããŠè©±ã—ã—ã¾ã™ã€‚

ã€Œã©ã®å ´é¢ã§ã©ã®æ‰‹æ³•ã‚’é¸ã¹ã°ã‚ˆã„ã®ã‹ã€ã€Œstyled-componentsã‚’Next.js 13+ã§æœ€é©åŒ–ã™ã‚‹ã«ã¯ï¼Ÿã€ã¨ã„ã£ãŸå®Ÿè·µçš„ãªå†…å®¹ã‚’ã”ç´¹ä»‹äºˆå®šã§ã™ã€‚dev.toç´šã®æç”»é€Ÿåº¦ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®å…·ä½“çš„ãªæ‰‹æ³•ã‚‚ä¸€ç·’ã«å­¦ã‚“ã§ã„ãã¾ã—ã‚‡ã†ã€‚

## ã¾ã¨ã‚

Next.jsæ–°ä¸–ä»£ã¸ã®ç§»è¡Œã¯ã€æŠ€è¡“çš„ãªãƒ¡ãƒªãƒƒãƒˆã ã‘ã§ãªãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã•ã‚“ã«ã¨ã£ã¦ã‚‚ã‚ˆã‚Šè‰¯ã„ä½“é¨“ã‚’æä¾›ã§ãã‚‹ç´ æ™´ã‚‰ã—ã„æ©Ÿä¼šã§ã™ã€‚

é‡è¦ãªã®ã¯ã€Œæ€¥ãŒãšã«ã€ã§ã‚‚ç¢ºå®Ÿã«ã€é€²ã‚ã‚‹ã“ã¨ã€‚æ—¢å­˜ã®Pages Routerã®çŸ¥è­˜ã‚„çµŒé¨“ã¯ã€æ–°ã—ã„App Routerã§ã‚‚æ´»ã‹ã•ã‚Œã¾ã™ã€‚ãã‚Œã¯æ–°ã—ã„æ©Ÿèƒ½ãŒæ—¢å­˜ã®è‰¯ã„éƒ¨åˆ†ã‚’ç¶™æ‰¿ã—ãªãŒã‚‰é€²åŒ–ã—ãŸã‚‚ã®ã ã‹ã‚‰ã€ã¤ã¾ã‚Šå­¦ç¿’ã‚³ã‚¹ãƒˆã‚’æœ€å°é™ã«æŠ‘ãˆãªãŒã‚‰å¤§ããªãƒ¡ãƒªãƒƒãƒˆã‚’å¾—ã‚‰ã‚Œã‚‹ã£ã¦ã‚ã‘ã­ã€‚

æ°—åˆ†ã‚’å®³ã•ã‚ŒãŸã‚‰ã”ã‚ã‚“ãªã•ã„ã€ã§ã‚‚ç§ã¨ã—ã¦ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã¨æŠ€è¡“çš„æ­£ç¢ºæ€§ã®ä¸¡æ–¹ã‚’å¤§åˆ‡ã«ã—ãªãŒã‚‰ã€æ®µéšçš„ã«ç§»è¡Œã‚’é€²ã‚ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

æ¬¡å›ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ‰‹æ³•ã®é¸æŠæˆ¦ç•¥ã§ãŠä¼šã„ã—ã¾ã—ã‚‡ã†ã€‚èª­è€…ã®çš†æ§˜ã€ã„ã¤ã‚‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚

---

**ğŸ¤– AIç”Ÿæˆè¨˜äº‹ã«ã¤ã„ã¦**
ã“ã®è¨˜äº‹ã¯Claude (Anthropic) ã«ã‚ˆã‚Šç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚æŠ€è¡“çš„å†…å®¹ã«ã¤ã„ã¦ã¯2025å¹´8æœˆæ™‚ç‚¹ã®æƒ…å ±ã«åŸºã¥ã„ã¦ãŠã‚Šã€UI/UXã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ä¸¡é¢ã‹ã‚‰æ¤œè¨¼æ¸ˆã¿ã§ã™ã€‚

**ğŸ“ åŸ·ç­†è€…**: youkoï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ»UI/UXãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ï¼‰  
**ğŸ” ãƒ¬ãƒ“ãƒ¥ãƒ¼**: alexandra_sterlingï¼ˆã‚·ãƒ‹ã‚¢ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆï¼‰ã«ã‚ˆã‚‹æŠ€è¡“çš„æ­£ç¢ºæ€§ãƒã‚§ãƒƒã‚¯æ¸ˆã¿  
**ğŸ“Š ã‚·ãƒªãƒ¼ã‚º**: Next.jsæœ€é€Ÿãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®æ”»é˜²ï¼ˆå…¨4å›ï¼‰