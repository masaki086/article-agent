graph TD
    A(ヘルスチェック開始) -.-> B(APIヘルスチェック)
    B -.-> C(データベース<br/>接続確認)
    C -.-> D(キャッシュ<br/>接続確認)
    D -.-> E(外部API<br/>疎通確認)
    E -.-> F(システム<br/>リソース確認)
    
    B -.->|　　失敗　　| G(unhealthy)
    C -.->|　　失敗　　| G
    D -.->|　　失敗　　| G
    E -.->|　　失敗　　| G
    F -.->|　　失敗　　| G
    
    F -.->|　全て成功　| H(healthy)
    F -.->|　一部失敗　| I(degraded)
    
    G -.-> J(アラート<br/>発報)
    H -.-> K(正常<br/>ステータス<br/>更新)
    I -.-> L(警告<br/>ログ記録)
    
    style A fill:#ffffff,color:#000000,stroke:#9ca3af,stroke-width:2px,stroke-dasharray: 5 5
    style B fill:#ffffff,color:#000000,stroke:#6b7280,stroke-width:2px,stroke-dasharray: 5 5
    style C fill:#ffffff,color:#000000,stroke:#6b7280,stroke-width:2px,stroke-dasharray: 5 5
    style D fill:#ffffff,color:#000000,stroke:#6b7280,stroke-width:2px,stroke-dasharray: 5 5
    style E fill:#ffffff,color:#000000,stroke:#6b7280,stroke-width:2px,stroke-dasharray: 5 5
    style F fill:#ffffff,color:#000000,stroke:#6b7280,stroke-width:2px,stroke-dasharray: 5 5
    style G fill:#fee2e2,color:#000000,stroke:#ef4444,stroke-width:2px,stroke-dasharray: 5 5
    style H fill:#d1fae5,color:#000000,stroke:#10b981,stroke-width:2px,stroke-dasharray: 5 5
    style I fill:#fef3c7,color:#000000,stroke:#f59e0b,stroke-width:2px,stroke-dasharray: 5 5
    style J fill:#ffffff,color:#000000,stroke:#6b7280,stroke-width:2px,stroke-dasharray: 5 5
    style K fill:#ffffff,color:#000000,stroke:#6b7280,stroke-width:2px,stroke-dasharray: 5 5
    style L fill:#ffffff,color:#000000,stroke:#6b7280,stroke-width:2px,stroke-dasharray: 5 5